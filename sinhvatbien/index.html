<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bảo Tàng Tiến Hoá: Sinh Vật Biển & Đại Dương</title>
    
    <meta property="og:title" content="Bộ Thẻ Sinh Vật Biển Kỳ Diệu" />
    <meta property="og:description" content="Bộ thẻ bảo tàng tiến hoá: Khám phá sự thích nghi và tiến hoá kỳ diệu của các loài sinh vật biển." />
    <meta property="og:image" content="https://i.pinimg.com/736x/b7/a5/fa/b7a5fa5b9c3f92aa099eae6fbd27e067.jpg" />
    <meta property="og:url" content="https://mekeconnghe.github.io/baotangtienhoa/sinhvatbien/" />
    <meta property="og:type" content="website" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }
        
        .perspective-1000 {
            perspective: 1000px;
        }

        .noselect {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        .progress-transition {
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
    </style>
</head>
<body class="bg-blue-50 min-h-screen font-sans text-gray-800 flex flex-col items-center py-4 px-3 md:py-6 md:px-4">

    <div class="text-center mb-4 w-full space-y-2">
        <h1 class="text-xl md:text-3xl font-bold text-blue-900 flex items-center justify-center gap-2">
            <i data-lucide="anchor" class="w-6 h-6 md:w-8 md:h-8"></i>
            Bảo Tàng Tiến Hoá
        </h1>
        <div class="text-sm md:text-xl font-semibold text-blue-600 uppercase tracking-widest border-b-2 border-blue-200 inline-block pb-1">
            Sinh Vật Biển - Thích Nghi & Săn Mồi
        </div>
        
        <div class="pt-1">
            <a href="https://zalo.me/g/hirmwg741" target="_blank" class="inline-flex items-center gap-2 bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white px-4 py-2 rounded-full text-xs md:text-sm font-bold shadow-md transition-all border-2 border-white ring-2 ring-blue-100">
                <i data-lucide="users" class="w-4 h-4"></i>
                Tham Gia Cộng đồng Mẹ Kể Con Nghe
            </a>
        </div>
    </div>

    <div class="w-full max-w-lg perspective-1000 group flex-grow flex flex-col justify-center mb-4">
        <div 
            id="flashcard"
            class="relative w-full bg-white rounded-2xl shadow-xl overflow-hidden cursor-pointer transition-all duration-300 transform active:scale-[0.99] border-b-4 border-blue-200 noselect"
            onclick="handleCardClick()"
        >
            <div class="absolute inset-0 flex flex-col h-full relative">
                
                <div id="card-header" class="flex-none flex flex-col w-full px-3 pt-2 mb-0 bg-white">
                    <div class="flex justify-between items-center mb-1">
                        <div class="flex items-center gap-1 text-gray-400 font-bold text-[10px]">
                            <i data-lucide="map" class="w-3 h-3 text-cyan-400"></i>
                            <span id="counter-text">1/20</span>
                        </div>
                        <span id="side-indicator" class="px-2 py-0.5 rounded bg-blue-50 text-blue-600 font-bold text-[10px] uppercase">
                            Hình ảnh
                        </span>
                    </div>
                    <div class="w-full h-0.5 bg-gray-100 rounded-full overflow-hidden">
                        <div id="progress-bar" class="h-full bg-cyan-400 rounded-full progress-transition" style="width: 5%"></div>
                    </div>
                </div>

                <div id="card-content" class="flex-grow flex flex-col items-center justify-center text-center w-full">
                    </div>
            </div>
        </div>
    </div>

    <div class="w-full max-w-lg flex gap-3 mb-4">
        <button 
            onclick="prevCard()"
            class="flex-1 flex items-center justify-center gap-2 bg-white hover:bg-gray-50 active:bg-gray-100 text-gray-700 px-4 py-3 rounded-xl shadow-sm border border-gray-200 font-bold text-base md:text-lg transition-colors touch-manipulation"
        >
            <i data-lucide="chevron-left" class="w-5 h-5 md:w-6 md:h-6"></i> Trước
        </button>
        
        <button 
            id="btn-next"
            onclick="nextCard()"
            class="flex-1 flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 active:bg-blue-800 text-white px-4 py-3 rounded-xl shadow-md shadow-blue-200 font-bold text-base md:text-lg transition-colors touch-manipulation"
        >
            Sau <i data-lucide="chevron-right" class="w-5 h-5 md:w-6 md:h-6"></i>
        </button>
    </div>

    <script>
        const dataSources = [
            {
                id: 136, name: "Cá mập đầu búa", image: "ca-map-dau-bua.jpg",
                facts: [
                    "Tiến hóa đặc biệt: Chúng tiến hóa hình dạng đầu kỳ lạ (Cephalofoil) để tăng tầm nhìn bao quát và mở rộng diện tích cảm biến điện từ.",
                    "Tầm nhìn 360 độ: Vị trí mắt ở hai đầu búa giúp chúng quan sát phía trên và phía dưới cùng một lúc, không có điểm mù.",
                    "Khả năng quay ngoặt: Cái đầu dẹt hoạt động như cánh máy bay dưới nước, giúp chúng bẻ lái cực nhanh khi săn đuổi mồi.",
                    "Miễn nhiễm nọc độc: Món ăn ưa thích của chúng là cá đuối gai độc, và dường như chúng miễn nhiễm với nọc độc của con mồi.",
                    "Tắm nắng: Chúng thường bơi nghiêng một góc để phơi nắng làm ấm cơ thể, một hành vi hiếm thấy ở các loài cá mập khác."
                ]
            },
            {
                id: 137, name: "Cá chình điện", image: "ca-chinh-dien.jpg",
                facts: [
                    "Vũ khí sinh học: Tiến hóa các tế bào điện thế cao (Electrocytes) xếp chồng lên nhau như pin để săn mồi và tự vệ.",
                    "Sốc điện chết người: Một cú phóng điện của chúng có thể đạt tới 860 Volt, đủ sức hạ gục một con cá sấu trưởng thành.",
                    "Không phải là lươn: Dù có tên là cá chình (hay lươn điện), về mặt phân loại chúng thực ra thuộc bộ Cá chép mỡ (Gymnotiformes).",
                    "Thở không khí: Chúng sống ở vùng nước nghèo oxy nên bắt buộc phải ngoi lên mặt nước để hớp không khí (chiếm 80% nhu cầu hô hấp).",
                    "Định vị bằng điện: Do mắt kém, chúng phát ra các xung điện yếu liên tục để định vị môi trường xung quanh như radar."
                ]
            },
            {
                id: 138, name: "Cá đuối điện", image: "ca-duoi-dien.jpg",
                facts: [
                    "Tiến hóa hội tụ: Tương tự cá chình điện nhưng tiến hóa độc lập ở môi trường biển, với cơ quan phát điện hình quả thận ở hai bên đầu.",
                    "Kẻ săn mồi phục kích: Chúng thường vùi mình dưới cát và phóng điện làm tê liệt con mồi bơi ngang qua.",
                    "Y học cổ đại: Người Hy Lạp và La Mã xưa từng dùng cá đuối điện để đặt lên người bệnh nhân nhằm chữa đau đầu và bệnh gút (tiền thân của liệu pháp sốc điện).",
                    "Nguồn cảm hứng pin: Cấu tạo cơ quan điện của chúng đã truyền cảm hứng cho việc phát minh ra pin nhân tạo đầu tiên.",
                    "Điện thế thấp hơn: Dòng điện của chúng thường yếu hơn cá chình điện (khoảng 200V) nhưng đủ để tự vệ trước kẻ thù lớn."
                ]
            },
            {
                id: 139, name: "Cá vảy chân (Anglerfish)", image: "ca-vay-chan.jpg",
                facts: [
                    "Cần câu phát sáng: Tiến hóa mồi nhử phát sáng chứa vi khuẩn quang hợp trước miệng để dụ con mồi tới gần trong bóng tối vĩnh cửu.",
                    "Dạ dày không đáy: Dạ dày và hàm của chúng có khả năng co giãn cực đại để nuốt chửng con mồi to gấp đôi cơ thể mình.",
                    "Cuộc tình kỳ lạ: Ở một số loài, cá đực nhỏ bé sẽ cắn vào cá cái, tan chảy da và trở thành một phần cơ thể của cá cái mãi mãi.",
                    "Bóng tối vĩnh cửu: Sống ở độ sâu hàng ngàn mét, nơi áp suất cực lớn và không có ánh sáng mặt trời.",
                    "Tiết kiệm năng lượng: Do thức ăn khan hiếm, chúng hầu như không di chuyển, chỉ nằm chờ mồi tự đến."
                ]
            },
            {
                id: 140, name: "Cá bay", image: "ca-bay.jpg",
                facts: [
                    "Đôi cánh dưới nước: Phát triển vây ngực cực lớn và cứng cáp để lướt trên mặt nước tránh kẻ thù săn mồi dưới biển.",
                    "Bay xa 200 mét: Chúng có thể lướt trên không trung một quãng đường dài tới 200m và đạt độ cao 6m so với mặt biển.",
                    "Động cơ đuôi: Khi chuẩn bị bay, chúng quẫy đuôi 70 lần/giây xuống mặt nước để tạo đà phóng lên.",
                    "Tốc độ ấn tượng: Tốc độ bay lướt của chúng có thể đạt tới 60km/h, nhanh như một chiếc xe máy.",
                    "Kẻ thù khắp nơi: Dù bay lên để tránh cá lớn, chúng lại dễ trở thành mồi ngon cho chim biển."
                ]
            },
            {
                id: 141, name: "Cá nanh mực", image: "ca-nanh-muc.jpg",
                facts: [
                    "Bộ răng kinh dị: Là loài cá có bộ răng dài nhất so với tỷ lệ cơ thể, răng dài đến mức không thể khép miệng hoàn toàn.",
                    "Thích nghi khan hiếm: Răng dài giúp chúng đóng vai trò như một cái lồng, giam cầm bất cứ con mồi nào lỡ bơi qua.",
                    "Cột sống linh hoạt: Đốt sống đầu tiên của chúng có bộ giảm xóc, cho phép đầu ngửa ra sau để mở rộng hàm tối đa.",
                    "Đèn pha dẫn dụ: Có các đốm phát sáng dọc bụng và vây lưng để thu hút con mồi trong vùng nước tối.",
                    "Kẻ săn mồi thụ động: Chúng trôi nổi lơ lửng, giảm thiểu cử động để tiết kiệm năng lượng tối đa."
                ]
            },
            {
                id: 142, name: "Cá mặt quỷ", image: "ca-mat-quy.jpg",
                facts: [
                    "Bậc thầy ngụy trang: Tiến hóa lớp da sần sùi giúp chúng ngụy trang hoàn hảo thành tảng đá hoặc rạn san hô chết.",
                    "Nọc độc chết người: Gai trên lưng chứa độc tố thần kinh cực mạnh, có thể gây tử vong cho con người trong vài giờ.",
                    "Phục kích chớp nhoáng: Khi con mồi đến gần, chúng há miệng hút mồi vào với tốc độ chỉ 0.015 giây.",
                    "Sức sống mãnh liệt: Cá mặt quỷ có thể sống sót trên cạn tới 24 giờ miễn là da chúng còn ẩm ướt.",
                    "Không tấn công chủ động: Chúng chỉ dùng gai độc để tự vệ khi bị dẫm phải hoặc bị kẻ thù tấn công."
                ]
            },
            {
                id: 143, name: "Cá rồng", image: "ca-rong.jpg",
                facts: [
                    "Hóa thạch sống: Loài cá cổ đại giữ nguyên hình thái từ kỷ Jura hàng triệu năm trước đến tận ngày nay.",
                    "Lưỡi xương: Chúng có một chiếc lưỡi cứng bằng xương và hàm răng mọc ngay trên lưỡi để giữ chặt con mồi.",
                    "Vua nhảy cao: Cá rồng có thể nhảy cao tới 2m khỏi mặt nước để bắt côn trùng và chim đậu trên cành cây.",
                    "Ông bố vĩ đại: Cá rồng đực sẽ ngậm trứng và cá con trong miệng suốt nhiều tuần để bảo vệ, nhịn ăn hoàn toàn.",
                    "Biểu tượng may mắn: Do bộ vảy lấp lánh như rồng, chúng được coi là biểu tượng của sự giàu sang và quyền lực."
                ]
            },
            {
                id: 144, name: "Lươn biển (Moray Eel)", image: "luon-bien.jpg",
                facts: [
                    "Bộ hàm thứ hai: Phát triển bộ hàm phụ (Pharyngeal jaw) nằm sâu trong cổ họng để kéo con mồi vào bụng sau khi hàm chính đã cắn chặt.",
                    "Da trơn nhớt: Không có vảy, cơ thể phủ lớp nhớt dày giúp chúng trườn qua các hốc đá sắc nhọn mà không bị thương.",
                    "Hợp tác săn mồi: Chúng thường hợp tác với cá Mú, một loài xua đuổi mồi ra khỏi rạn, một loài đón lõng bắt mồi.",
                    "Mắt kém mũi thính: Thị lực rất kém nhưng khứu giác cực nhạy giúp chúng phát hiện mùi máu từ rất xa.",
                    "Răng cong ngược: Răng của lươn biển mọc cong về phía sau, khiến con mồi một khi đã bị cắn thì không thể thoát ra."
                ]
            },
            {
                id: 145, name: "Tôm tít (Mantis Shrimp)", image: "tom-tit.jpg",
                facts: [
                    "Đôi mắt siêu việt: Tiến hóa đôi mắt phức tạp nhất thế giới, nhìn thấy màu cực tím và ánh sáng phân cực mà con người không thấy được.",
                    "Cú đấm tốc độ: Càng của chúng bung ra với tốc độ nhanh như đạn bắn (80km/h), đủ sức đập vỡ kính bể cá.",
                    "Sôi nước: Cú đấm nhanh đến mức tạo ra vùng chân không làm nước xung quanh sôi lên, tạo thêm sóng xung kích sát thương.",
                    "Chung thủy: Tôm tít là một trong số ít loài giáp xác sống chung thủy một vợ một chồng suốt đời.",
                    "Giáp siêu cứng: Lớp vỏ ở càng của chúng cứng và bền đến mức đang được nghiên cứu để chế tạo áo giáp quân sự."
                ]
            },
            {
                id: 146, name: "Cua nhện Nhật Bản", image: "cua-nhen.jpg",
                facts: [
                    "Chân dài vô địch: Tiến hóa đôi chân siêu dài giúp sải chân của chúng có thể đạt tới 3.8 mét, lớn nhất loài giáp xác.",
                    "Ngụy trang: Chúng thường gắn bọt biển hoặc hải quỳ lên vỏ để ngụy trang hòa mình vào đáy biển.",
                    "Sống thọ: Đây là một trong những loài động vật sống lâu nhất, có thể đạt tới 100 tuổi.",
                    "Máy dọn vệ sinh: Chúng là loài ăn tạp và ăn xác thối, giúp làm sạch đáy biển sâu.",
                    "Lột xác khó khăn: Quá trình lột xác của cua nhện kéo dài và rất nguy hiểm, chúng có thể bị kẹt trong vỏ cũ và chết."
                ]
            },
            {
                id: 147, name: "Ốc cối (Cone Snail)", image: "oc-coi.jpg",
                facts: [
                    "Thợ săn chậm mà chắc: Phát triển nọc độc cực mạnh và cơ chế phóng răng như lao móc để săn các loài cá bơi nhanh.",
                    "Insulin độc: Nọc độc của chúng chứa một loại insulin đặc biệt khiến con mồi bị sốc đường huyết và tê liệt ngay lập tức.",
                    "Vẻ đẹp chết người: Vỏ ốc có hoa văn rất đẹp nhưng chứa nọc độc đủ để giết chết một người trưởng thành.",
                    "Lưỡi bào đặc biệt: Răng của chúng thực chất là lưỡi bào biến đổi thành kim tiêm, chỉ dùng một lần rồi thay cái mới.",
                    "Tiềm năng y học: Độc tố của ốc cối đang được nghiên cứu để chế tạo thuốc giảm đau mạnh gấp 100 lần morphin."
                ]
            },
            {
                id: 148, name: "Hải sâm", image: "hai-sam.jpg",
                facts: [
                    "Vũ khí nội tạng: Tiến hóa cơ chế tự vệ kinh dị bằng cách phóng toàn bộ cơ quan nội tạng ra ngoài để đánh lạc hướng kẻ thù, sau đó tự tái tạo lại.",
                    "Biến hình cơ thể: Cơ thể chứa collagen đặc biệt cho phép chúng chuyển từ trạng thái cứng như đá sang lỏng như nước để chui qua khe hẹp.",
                    "Thở bằng... mông: Chúng hít thở bằng cách hút nước vào qua hậu môn để lấy oxy.",
                    "Máy lọc biển: Một con hải sâm có thể lọc hàng chục tấn cát mỗi năm, đóng vai trò quan trọng làm sạch đại dương.",
                    "Khả năng tái sinh: Nếu bị cắt đôi, một số loài hải sâm có thể tái sinh thành hai cá thể hoàn chỉnh."
                ]
            },
            {
                id: 149, name: "Cá heo Orca", image: "ca-heo-orca.jpg",
                facts: [
                    "Văn hóa săn mồi: Mỗi đàn Orca có văn hóa và chiến thuật săn mồi riêng biệt (ví dụ: tạo sóng để hất hải cẩu khỏi tảng băng).",
                    "Đỉnh chuỗi thức ăn: Chúng là loài săn mồi đỉnh cao, thậm chí săn cả cá mập trắng lớn để ăn gan.",
                    "Chế độ mẫu hệ: Đàn Orca được dẫn dắt bởi con cái già nhất (bà ngoại), chúng truyền đạt kinh nghiệm sống cho con cháu.",
                    "Ngôn ngữ riêng: Các đàn khác nhau có 'phương ngữ' giao tiếp khác nhau bằng âm thanh.",
                    "Trí tuệ cảm xúc: Não của chúng có phần xử lý cảm xúc phát triển hơn cả con người, biết đau buồn và cảm thông sâu sắc."
                ]
            },
            {
                id: 150, name: "Cá nhà táng", image: "ca-nha-tang.jpg",
                facts: [
                    "Thợ lặn sâu: Tiến hóa cơ quan chứa dầu (Spermaceti) trên đầu giúp điều chỉnh độ nổi để lặn sâu hơn 2000m săn mực khổng lồ.",
                    "Âm thanh lớn nhất: Tiếng lách cách của chúng là âm thanh lớn nhất trong thế giới động vật, có thể làm choáng con mồi.",
                    "Ngủ đứng: Cá nhà táng có tư thế ngủ rất lạ, chúng ngủ treo thẳng đứng lơ lửng trong nước.",
                    "Long diên hương: Chất thải tiêu hóa của chúng (Long diên hương) là nguyên liệu đắt hơn vàng dùng trong nước hoa.",
                    "Não lớn nhất: Chúng sở hữu bộ não lớn nhất trong tất cả các loài động vật từng tồn tại trên Trái Đất."
                ]
            },
            {
                id: 151, name: "Cá tầm", image: "ca-tam.jpg",
                facts: [
                    "Cá bọc thép: Là loài cá xương cổ đại, thay vì vảy, thân chúng được bao bọc bởi các hàng tấm xương cứng (scutes).",
                    "Bộ xương sụn: Dù được gọi là cá xương, bộ xương của chúng chủ yếu là sụn, giữ nguyên đặc điểm từ thời tiền sử.",
                    "Sống thọ trăm tuổi: Cá tầm có thể sống tới 100 năm và phát triển kích thước khổng lồ.",
                    "Trứng vàng đen: Trứng cá tầm (Caviar) là một trong những loại thực phẩm đắt đỏ nhất thế giới.",
                    "Miệng giác hút: Miệng nằm dưới bụng dạng ống hút giúp chúng sục sạo đáy sông biển để tìm thức ăn."
                ]
            },
            {
                id: 152, name: "Cá nhám voi", image: "ca-nham-voi.jpg",
                facts: [
                    "Gã khổng lồ hiền lành: Từ loài ăn thịt, chúng tiến hóa thành loài cá lớn nhất thế giới nhưng chỉ ăn sinh vật phù du nhỏ bé.",
                    "Răng tí hon: Dù miệng rộng tới 1.5m, chúng có hàng nghìn chiếc răng nhưng chỉ nhỏ như đầu que diêm và không dùng để cắn.",
                    "Dấu vân tay: Các đốm trắng trên da cá nhám voi là độc nhất vô nhị ở mỗi con, giống như vân tay người.",
                    "Lớp da dày: Da của chúng có thể dày tới 10-15cm, là lớp giáp bảo vệ cực tốt trước các loài thú săn mồi.",
                    "Máy lọc nước: Chúng lọc hàng ngàn lít nước mỗi giờ qua mang để giữ lại thức ăn."
                ]
            },
            {
                id: 153, name: "Cá kiếm", image: "ca-kiem.jpg",
                facts: [
                    "Hệ thống sưởi mắt: Tiến hóa cơ quan sưởi ấm đặc biệt giúp làm ấm mắt và não, giúp chúng săn mồi cực nhạy ở vùng nước lạnh sâu.",
                    "Kiếm để chém: Chiếc mỏ dài (kiếm) không dùng để đâm mà dùng để chém ngang vào đàn cá, làm con mồi bị thương hoặc choáng.",
                    "Tốc độ kinh hoàng: Là một trong những loài cá bơi nhanh nhất đại dương, có thể đạt tốc độ 100km/h.",
                    "Mất răng khi lớn: Cá con có răng, nhưng khi trưởng thành chúng rụng hết răng và nuốt chửng con mồi.",
                    "Kẻ cô độc: Khác với cá ngừ hay đi theo đàn, cá kiếm là những thợ săn đơn độc trên đại dương."
                ]
            },
            {
                id: 154, name: "Hải quỳ", image: "hai-quy.jpg",
                facts: [
                    "Thực hay Động?: Trông giống bông hoa nhưng thực chất là động vật ăn thịt, họ hàng với sứa và san hô.",
                    "Cộng sinh: Chúng có mối quan hệ cộng sinh nổi tiếng với cá hề - cá hề được bảo vệ khỏi kẻ thù, hải quỳ được dọn thức ăn thừa.",
                    "Xúc tu chứa độc: Các xúc tu đẹp đẽ chứa hàng ngàn gai nhọn có nọc độc để làm tê liệt con mồi chạm vào.",
                    "Bất tử?: Một số loài hải quỳ không có dấu hiệu lão hóa sinh học, chúng có thể sống cực lâu nếu không bị ăn thịt.",
                    "Di chuyển chậm: Dù thường bám chặt vào đá, chúng có thể trườn rất chậm hoặc bơi bằng cách uốn mình khi gặp nguy hiểm."
                ]
            },
            {
                id: 155, name: "Rồng biển lá (Leafy Seadragon)", image: "rong-bien-la.jpg",
                facts: [
                    "Ngụy trang tuyệt đối: Tiến hóa các phần phụ trên cơ thể giống hệt lá rong biển để ngụy trang trốn kẻ thù.",
                    "Ông bố mang bầu: Giống như cá ngựa, con đực sẽ mang trứng ở đuôi cho đến khi trứng nở.",
                    "Không có răng: Chúng không có răng, chỉ dùng cái miệng dài như ống hút để hút các loài tôm nhỏ.",
                    "Bơi lội vụng về: Do quá chú trọng vào việc ngụy trang, vây bơi của chúng rất nhỏ và trong suốt, khiến chúng bơi rất chậm.",
                    "Cứng như đá: Cơ thể chúng được bao bọc bởi các tấm xương cứng, khiến hầu hết các loài săn mồi đều chê vì 'khó nuốt'."
                ]
            }
        ];

        // --- State ---
        let currentIndex = 0;
        let isFlipped = false;
        let isEndScreen = false;

        // --- DOM Elements ---
        const contentEl = document.getElementById('card-content');
        const cardHeader = document.getElementById('card-header');
        const counterText = document.getElementById('counter-text');
        const progressBar = document.getElementById('progress-bar');
        const indicatorEl = document.getElementById('side-indicator');
        const btnNext = document.getElementById('btn-next');

        // --- Functions ---

        function renderCard() {
            if (isEndScreen) {
                renderEndScreen();
                return;
            }

            // Reset UI states
            cardHeader.style.display = 'flex';
            
            const currentCard = dataSources[currentIndex];
            
            // Cập nhật Thanh tiến trình & Số đếm
            const progressPercent = ((currentIndex + 1) / dataSources.length) * 100;
            counterText.textContent = `${currentIndex + 1}/${dataSources.length}`;
            progressBar.style.width = `${progressPercent}%`;

            
            if (isFlipped) {
                indicatorEl.textContent = 'Thông tin';
                indicatorEl.className = 'px-2 py-0.5 rounded bg-blue-100 text-blue-800 font-bold text-[10px] uppercase';
            } else {
                indicatorEl.textContent = 'Ảnh';
                indicatorEl.className = 'px-2 py-0.5 rounded bg-cyan-100 text-cyan-800 font-bold text-[10px] uppercase';
            }

            // Nút Next logic
            btnNext.innerHTML = currentIndex === dataSources.length - 1 ? 'Hoàn thành <i data-lucide="check" class="w-5 h-5"></i>' : 'Sau <i data-lucide="chevron-right" class="w-5 h-5"></i>';

            let html = '';

            if (!isFlipped) {
                // MẶT TRƯỚC:
                html += `<div class="animate-fade-in w-full flex flex-col">`;
                
                // PHẦN ẢNH:
                html += `
                    <div class="relative w-full bg-white">
                         <img 
                            src="${currentCard.image}" 
                            alt="${currentCard.name}" 
                            class="w-full h-auto block"
                            onerror="this.src='https://placehold.co/600x400/cyan/white?text=${encodeURIComponent(currentCard.name)}';"
                         >
                    </div>
                `;
                
                // NÚT LẬT:
                html += `
                    <div class="w-full flex justify-center py-3 bg-white border-t border-gray-100">
                        <div class="inline-flex items-center gap-1.5 bg-white border border-cyan-200 text-cyan-600 px-4 py-1.5 rounded-full text-xs font-bold shadow-sm animate-pulse">
                            <i data-lucide="rotate-cw" class="w-3 h-3 text-cyan-500"></i>
                            Lật mặt sau để xem 5 sự thật thú vị
                        </div>
                    </div>
                `;
                html += `</div>`;
            } else {
                // MẶT SAU
                html += `<div class="animate-fade-in w-full h-full flex flex-col px-4 pb-6 py-4">`;
                
                html += `<h3 class="flex-none text-xl font-bold text-blue-700 mb-3 uppercase border-b border-blue-200 pb-2 w-full text-center">${currentCard.name}</h3>`;
                
                html += `<div class="flex-grow flex flex-col gap-2 w-full">`;
                
                currentCard.facts.forEach((fact, index) => {
                    html += `
                        <div class="flex items-start gap-3 bg-blue-50 p-3 rounded-lg border border-blue-100 shadow-sm items-center">
                            <span class="flex-shrink-0 bg-blue-500 text-white w-6 h-6 rounded-full flex items-center justify-center font-bold text-xs shadow-sm">${index + 1}</span>
                            <span class="text-gray-700 text-sm leading-snug font-medium text-justify">${fact}</span>
                        </div>
                    `;
                });
                
                html += `</div>`; // End List Container
                html += `</div>`; // End Main Container
            }

            contentEl.innerHTML = html;
            lucide.createIcons();
        }

        function renderEndScreen() {
            cardHeader.style.display = 'none';
            btnNext.innerHTML = 'Hết bài';

            let html = `
                <div class="animate-fade-in flex flex-col items-center justify-center h-full text-center space-y-6 px-4 py-8">
                    
                    <div class="bg-gradient-to-br from-cyan-100 to-blue-200 p-6 rounded-full shadow-lg shadow-blue-200">
                        <i data-lucide="crown" class="w-20 h-20 text-blue-600 fill-blue-600"></i>
                    </div>

                    <div class="px-2">
                        <h2 class="text-2xl md:text-3xl font-bold text-blue-700 mb-3">Bé Giỏi Quá!</h2>
                        <p class="text-gray-600 text-base md:text-lg leading-relaxed">
                            Chúc mừng <b>"Bé"</b> đã hoàn thành hành trình khám phá ${dataSources.length} loài sinh vật biển kỳ diệu!
                        </p>
                    </div>
                    
                    <a href="https://catalog.zalo.me/?cid=Cj7DJZwIc0rDhRz0DP6M2ZogmrT3w-GVCQNEIK2Gdc0fjSuv98Jh5G" 
                       target="_blank"
                       class="flex items-center gap-3 bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white px-6 py-4 rounded-xl font-bold text-lg shadow-lg shadow-pink-200 transition-all hover:scale-105 transform border-2 border-white ring-2 ring-pink-100 mt-2">
                        <i data-lucide="gift" class="w-6 h-6"></i>
                        Xem tốt sản phẩm cho Mẹ & Bé 
                    </a>
                    
                    <button 
                        onclick="resetApp()"
                        class="flex items-center gap-2 text-blue-600 hover:text-blue-800 font-semibold text-sm mt-4 bg-blue-50 px-5 py-2 rounded-full transition-colors border border-blue-100">
                        <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
                        Khám phá lại từ đầu
                    </button>
                </div>
            `;
            contentEl.innerHTML = html;
            lucide.createIcons();
        }

        function handleCardClick() {
            if (isEndScreen) return;
            flipCard();
        }

        function flipCard() {
            isFlipped = !isFlipped;
            renderCard();
        }

        function nextCard() {
            event.stopPropagation();
            if (isEndScreen) return;

            if (currentIndex < dataSources.length - 1) {
                currentIndex++;
                isFlipped = false;
                renderCard();
            } else {
                isEndScreen = true;
                isFlipped = false;
                renderCard();
            }
        }

        function prevCard() {
            event.stopPropagation();
            if (isEndScreen) {
                isEndScreen = false;
                currentIndex = dataSources.length - 1;
                renderCard();
                return;
            }

            if (currentIndex > 0) {
                isFlipped = false;
                currentIndex--;
                renderCard();
            }
        }

        function resetApp() {
            event.stopPropagation();
            currentIndex = 0;
            isFlipped = false;
            isEndScreen = false;
            renderCard();
        }

        // --- Init ---
        lucide.createIcons();
        renderCard();

    </script>
</body>
</html>